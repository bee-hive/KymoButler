![alt text](misc/logo.png "KymoButler")
## The AI that analyses your kymograph
### 1. Use the cloud app!
Easy drag and drop software under http://deepmirror.ai/kymobutler
### 2. Usage of KymoButler Mathematica Library
Download this repository and open KymoButler.nb in Mathematica. Run the first cell to download the necessary neural networks and import the KymoButler package. Then use the functions `BiKymoButler[]` or `UniKymoButler[]` to analyse your bidirectional/unidirectional kymographs.


-----------------------------
### Beehive internal use of this repository

1. Install Mathematica onto your local machine. If you have Stanford credentials, you can obtain a free license here: https://uit.stanford.edu/service/softwarelic/mathematica 
2. Clone this forked repository onto your personal lab folder on beehive. For example, `/gladstone/engelhardt/lab/adamw/KymoButler`.
3. Mount the beehive filesystem onto your local machine using a `sshfs` command such as `sshfs beehive:/gladstone/engelhardt/ /Users/aweiner/beehive`.
4. Navigate to the location of this cloned repository on your local machine (e.g. `/Users/aweiner/beehive/lab/adamw/KymoButler`) and open the `bidirectional_kymos_adam.nb` file using Mathematica. 
5. Run the first cell to download the necessary neural networks and import the KymoButler package.
6. In the second cell, edit the `baseDir` variable to point to the folder where your kymographs are located, the `wellIDs` variable , along with experiment parameters. These input kymographs are expected to be generated by the `conklin_mitochondria_traffick/notebooks/kymograph_generation.ipynb` notebook.
7. Run the rest of the cells to generate `combined_output.csv` and `pixel_tracks.csv` files for each `wellID` along with PNG images of the kymographs overlaid with the predicted tracks. All output files are saved in the specified `outputDir`. The CSV files can be used for downstream analysis in python. Note that each cell must be manually run separately, in order, as Mathematica's `Evaluate Notebook` performs lazy parallel evaluation of all cells in the notebook (unlike jupyter notebooks which ensure that all cells are run in order).
8. Reset the Mathematica kernel via `Evaluation -> Quit Kernel -> Local` and clear outputs via `Cell -> Clear All Outputs`. Repeat steps 5-7 for the next set of experiment(s) & well(s) until all kymobutler runs are complete.